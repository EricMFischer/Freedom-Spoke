<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta charset="utf-8">
    <link href="styles/bootstrapColorScheme.css" rel="stylesheet">
    <link rel="stylesheet" href="lib/angular-material/angular-material.css">
    <link href="styles/style.css" rel="stylesheet">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>

    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular-route/angular-route.js"></script>
    <script src="lib/angular-ui-router/release/angular-ui-router.min.js"></script>

    <script src="app.js"></script>
    <script src="javascript/search.js"></script>
    <script src="javascript/results.js"></script>
  </head>

  <body ng-app="FlightPicker" ng-cloak>

    <!-- <md-toolbar>
      <div class="md-toolbar-tools">
        <md-button class="md-icon-button" aria-label="Settings">
          <img ng-src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDQ4IDQ4Ij4KICAgIDxwYXRoIGQ9Ik00MiAzMnYtNEwyNiAxOFY3YzAtMS42Ni0xLjM0LTMtMy0zcy0zIDEuMzQtMyAzdjExTDQgMjh2NGwxNi01djExbC00IDN2M2w3LTIgNyAydi0zbC00LTNWMjdsMTYgNXoiLz4KICAgIDxwYXRoIGQ9Ik0wIDBoNDh2NDhIMHoiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg=='>
        </md-button>
        <h2>
          <span class="md-title">Traveler's App</span>
        </h2>
      </div>
    </md-toolbar> -->

    <div ui-view="search"></div>
    <div ui-view="results"></div>
    
    <script>
      var width = 960,
          height = 600;

      var path = d3.geo.path()
          .projection(null);

      var svg = d3.select("body").append("svg")
          .attr("width", width)
          .attr("height", height);

      d3.json("us.json", function(error, us) {
        if (error) return console.error(error);
        
        // code for base map
        svg.append("path")
          .datum(topojson.feature(us, us.objects.nation))
          .attr("class", "land")
          .attr("d", path);

        // code for base map
        svg.append("path")
          .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))
          .attr("class", "border border--state")
          .attr("d", path);

        // place bubbles at each county centroid
        svg.append("g")
          .attr("class", "bubble")
          .selectAll("circle")
          .data(topojson.feature(us, us.objects.counties).features)
          .enter().append("circle")
          .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
          .attr("r", 1.5);

        // so that circles' areas are proportional to size of the population
        var radius = d3.scale.sqrt()
          .domain([0, 1e6])
          .range([0, 13]);

        // reduces occlusion by sorting bubbles by descending size
        // smaller bubbles are drawn on top of larger bubbles
        svg.append("g")
          .attr("class", "bubble")
          .selectAll("circle")
          .data(topojson.feature(us, us.objects.counties).features
          .sort(function(a, b) { return b.properties.population - a.properties.population; }))
          .enter().append("circle")
          .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
          .attr("r", function(d) { return radius(d.properties.population); });

        // legend displays 3 circles and their associated population sizes
        var legend = svg.append("g")
          .attr("class", "legend")
          .attr("transform", "translate(" + (width - 50) + "," + (height - 20) + ")")
          .selectAll("g")
          .data([1e6, 3e6, 6e6])
          .enter().append("g");

        legend.append("circle")
          .attr("cy", function(d) { return -radius(d); })
          .attr("r", radius);

        legend.append("text")
          .attr("y", function(d) { return -2 * radius(d); })
          .attr("dy", "1.3em")
          .text(d3.format(".1s"));
      });
    </script>

  </body>
</html>